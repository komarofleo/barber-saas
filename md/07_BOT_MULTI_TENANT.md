# –≠—Ç–∞–ø 7: Bot - –ú—É–ª—å—Ç–∏-–¢–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å

**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 3-4 –¥–Ω—è  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω (MVP)  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2026-01-14  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¶–µ–ª—å —ç—Ç–∞–ø–∞](#—Ü–µ–ª—å-—ç—Ç–∞–ø–∞)
2. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
3. [–ü–æ–¥–∑–∞–¥–∞—á–∏](#–ø–æ–¥–∑–∞–¥–∞—á–∏)
4. [–ß–µ–∫-–ª–∏—Å—Ç —ç—Ç–∞–ø–∞](#—á–µ–∫-–ª–∏—Å—Ç-—ç—Ç–∞–ø–∞)
5. [–†–∏—Å–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ](#—Ä–∏—Å–∫–∏-–∏-–∏—Ö-—Ä–µ—à–µ–Ω–∏–µ)

---

## üéØ –¶–µ–ª—å —ç—Ç–∞–ø–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Telegram –±–æ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π —Å –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö.

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- –ú—É–ª—å—Ç–∏-–±–æ—Ç —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ö–∞–∂–¥—ã–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–≤–æ–µ–π —Å—Ö–µ–º–æ–π –ë–î
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–µ
- Tenant-—Å–µ—Å—Å–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–µ
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

---

## üîß –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã

- [ ] –≠—Ç–∞–ø 3 –∑–∞–≤–µ—Ä—à–µ–Ω (–º—É–ª—å—Ç–∏-—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç)
- [ ] –≠—Ç–∞–ø 4 –∑–∞–≤–µ—Ä—à–µ–Ω (–ø—É–±–ª–∏—á–Ω—ã–µ API —Ä–∞–±–æ—Ç–∞—é—Ç)
- [ ] –≠—Ç–∞–ø 5 –∑–∞–≤–µ—Ä—à–µ–Ω (API —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –≤ tenant_001

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- aiogram 3.x —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–æ—Ç–∞–º–∏
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ö–µ–º–∞–º–∏ –ë–î

---

## üìù –ü–æ–¥–∑–∞–¥–∞—á–∏

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.1: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å bot/main.py –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:
   ```
   bot/main.py
   ```

2. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å:
   ```python
   """–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Telegram –±–æ—Ç–æ–≤"""
   import asyncio
   import logging
   from aiogram import Bot, Dispatcher
   from aiogram.fsm.storage.memory import MemoryStorage

   from bot.database.connection import init_db, get_session, get_tenant_session
   from shared.database.models import Company
   from bot.config import ADMIN_IDS
   from sqlalchemy import select

   # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ä–æ—É—Ç–µ—Ä—ã
   from bot.handlers.client.start import router as start_router
   from bot.handlers.client.booking import router as booking_router
   from bot.handlers.client.calendar import router as calendar_router
   from bot.handlers.client.my_bookings import router as my_bookings_router
   from bot.handlers.client.profile import router as profile_router
   from bot.handlers.admin.menu import router as admin_menu_router
   from bot.handlers.admin.bookings import router as admin_bookings_router
   from bot.handlers.master.work_order import router as master_router

   logger = logging.getLogger(__name__)


   async def run_bot_for_company(company: Company):
       """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏"""
       try:
           # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞
           if not company.telegram_bot_token:
               logger.warning(f"–ö–æ–º–ø–∞–Ω–∏—è {company.name} (ID: {company.id}) –Ω–µ –∏–º–µ–µ—Ç —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞")
               return
           
           # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏
           if not company.is_active:
               logger.warning(f"–ö–æ–º–ø–∞–Ω–∏—è {company.name} (ID: {company.id}) –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞")
               return
           
           if company.subscription_status not in ['active', 'overdue']:
               logger.warning(f"–ö–æ–º–ø–∞–Ω–∏—è {company.name} (ID: {company.id}) –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å: {company.subscription_status}")
               # –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å, –Ω–æ –∑–∞–ø–∏—Å—å –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
           
           # –°–æ–∑–¥–∞–µ–º –±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–æ–º –∫–æ–º–ø–∞–Ω–∏–∏
           bot = Bot(token=company.telegram_bot_token)
           dp = Dispatcher(storage=MemoryStorage())
           
           # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–µ
           dp['company_id'] = company.id
           dp['company_name'] = company.name
           dp['company_code'] = company.code
           dp['schema_name'] = f'tenant_{company.id}'
           dp['can_create_bookings'] = company.can_create_bookings
           dp['subscription_status'] = company.subscription_status
           dp['subscription_end_date'] = company.subscription_end_date
           
           logger.info(f"–ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ {company.name} (ID: {company.id})")
           
           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ë–î
           await init_db()
           
           # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ä–æ—É—Ç–µ—Ä—ã
           dp.include_router(start_router)
           dp.include_router(profile_router)
           dp.include_router(booking_router)
           dp.include_router(calendar_router)
           dp.include_router(my_bookings_router)
           dp.include_router(admin_menu_router)
           dp.include_router(admin_bookings_router)
           dp.include_router(master_router)
           
           # –ó–∞–ø—É—Å–∫–∞–µ–º polling
           await dp.start_polling(bot, skip_updates=True)
           
       except Exception as e:
           logger.error(f"–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ {company.name} (ID: {company.id}): {e}", exc_info=True)
           # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É –¥—Ä—É–≥–∏—Ö –±–æ—Ç–æ–≤, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–∏–Ω —É–ø–∞–ª


   async def main():
       """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –±–æ—Ç–æ–≤"""
       logger.info("=== –ó–∞–ø—É—Å–∫ Multi-Tenant Bot System ===")
       
       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ë–î
       await init_db()
       
       # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π —Å —Ç–æ–∫–µ–Ω–∞–º–∏
       async for session in get_session():
           result = await session.execute(
               select(Company).where(
                   Company.is_active == True,
                   Company.subscription_status.in_(['active', 'overdue']),
                   Company.telegram_bot_token.isnot(None)
               )
           )
           companies = result.scalars().all()
       
       logger.info(f"–ù–∞–π–¥–µ–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π: {len(companies)}")
       
       if not companies:
           logger.warning("–ù–µ –Ω–∞–π–¥–µ–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –±–æ—Ç–æ–≤!")
           return
       
       # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
       tasks = []
       for company in companies:
           task = asyncio.create_task(run_bot_for_company(company))
           tasks.append(task)
           logger.info(f"–°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ {company.name} (ID: {company.id})")
       
       # –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤
       logger.info("–ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ—Ö –±–æ—Ç–æ–≤...")
       try:
           await asyncio.gather(*tasks)
       except Exception as e:
           logger.error(f"–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}", exc_info=True)
           # –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É, –¥–∞–∂–µ –µ—Å–ª–∏ –±–æ—Ç —É–ø–∞–ª
       
       logger.info("–í—Å–µ –±–æ—Ç—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã")


   if __name__ == "__main__":
       logging.basicConfig(
           level=logging.INFO,
           format="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
       )
       asyncio.run(main())
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] main.py –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
- [ ] –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ—Ç–æ–≤
- [ ] –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.2: –û–±–Ω–æ–≤–∏—Ç—å bot/database/connection.py –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ö–µ–º–∞–º–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥—É–ª—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ tenant-—Å–µ—Å—Å–∏–π.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:
   ```
   bot/database/connection.py
   ```

2. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏:
   ```python
   """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏ –∫ –ë–î"""
   import logging
   from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine, async_sessionmaker
   from sqlalchemy.orm import declarative_base
   from sqlalchemy import text

   from bot.config import DATABASE_URL

   logger = logging.getLogger(__name__)

   # –°–æ–∑–¥–∞–µ–º –¥–≤–∏–∂–æ–∫
   engine = create_async_engine(DATABASE_URL, echo=False)
   session_factory = async_sessionmaker(
       engine,
       class_=AsyncSession,
       expire_on_commit=False
   )

   Base = declarative_base()


   async def get_session():
       """–ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ö–µ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)"""
       async with session_factory() as session:
           yield session


   async def get_tenant_session(company_id: int):
       """–ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ö–µ–º—ã –∫–ª–∏–µ–Ω—Ç–∞"""
       schema_name = f"tenant_{company_id}"
       
       async with session_factory() as session:
           # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º search_path –Ω–∞ –Ω—É–∂–Ω—É—é —Å—Ö–µ–º—É
           await session.execute(
               text(f"SET search_path TO {schema_name}, public")
           )
           await session.commit()
           
           yield session
       
       logger.debug(f"–°–æ–∑–¥–∞–Ω–∞ —Å–µ—Å—Å–∏—è –¥–ª—è —Å—Ö–µ–º—ã: {schema_name}")


   async def init_db():
       """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î (—Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü)"""
       async with engine.begin() as conn:
           # –°—Ö–µ–º–∞ public —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
           await conn.execute(
               text("CREATE SCHEMA IF NOT EXISTS public")
           )
           await conn.commit()
       
       # –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ (–¥–ª—è —Å—Ö–µ–º—ã public)
       # –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è tenant-—Å—Ö–µ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ


   async def close_db():
       """–ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π"""
       await engine.dispose()
       logger.info("–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∑–∞–∫—Ä—ã—Ç—ã")
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] connection.py –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] get_tenant_session —Å–æ–∑–¥–∞–Ω–∞
- [ ] search_path —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.3: –û–±–Ω–æ–≤–∏—Ç—å —Ö–µ–Ω–¥–ª–µ—Ä—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è tenant-—Å–µ—Å—Å–∏–π

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π –ë–î.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –û–±–Ω–æ–≤–∏—Ç—å bot/handlers/client/start.py:
   ```python
   @router.message(F.text == "/start")
   async def cmd_start(message: Message, state: FSMContext):
       """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
       # –ü–æ–ª—É—á–∞–µ–º company_id –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
       company_id = state.resolve_dp().get('company_id')
       
       if not company_id:
           logger.error("company_id –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ")
           await message.answer("‚ùå –û—à–∏–±–∫–∞: –∫–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
           return
       
       # –ò—Å–ø–æ–ª—å–∑—É–µ–º tenant-—Å–µ—Å—Å–∏—é
       async for session in get_tenant_session(company_id):
           # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
   ```

2. –û–±–Ω–æ–≤–∏—Ç—å bot/handlers/client/booking.py:
   ```python
   @router.message(F.text == "üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è")
   async def start_booking(message: Message, state: FSMContext):
       """–ù–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏"""
       # –ü–æ–ª—É—á–∞–µ–º company_id –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
       company_id = state.resolve_dp().get('company_id')
       can_create_bookings = state.resolve_dp().get('can_create_bookings', True)
       subscription_status = state.resolve_dp().get('subscription_status')
       
       # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏
       if not can_create_bookings:
           error_message = "‚ùå –ó–∞–ø–∏—Å—å –æ—Ç–∫–ª—é—á–µ–Ω–∞.\n\n"
           
           if subscription_status == 'overdue':
               error_message += "–í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞.\n"
               error_message += "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–¥–ª–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏."
           elif subscription_status == 'blocked':
               error_message += "–í–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞.\n"
               error_message += "–î–ª—è –¥–µ—Ç–∞–ª–µ–π –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."
           else:
               error_message += "–î–ª—è –¥–µ—Ç–∞–ª–µ–π –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."
           
           await message.answer(error_message)
           return
       
       # –ò—Å–ø–æ–ª—å–∑—É–µ–º tenant-—Å–µ—Å—Å–∏—é
       async for session in get_tenant_session(company_id):
           # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
   ```

3. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã:
   - bot/handlers/client/calendar.py
   - bot/handlers/client/my_bookings.py
   - bot/handlers/client/profile.py
   - bot/handlers/admin/menu.py
   - bot/handlers/admin/bookings.py
   - bot/handlers/master/work_order.py

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] start.py –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] booking.py –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Tenant-—Å–µ—Å—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.4: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–µ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–µ.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –û–±–Ω–æ–≤–∏—Ç—å bot/handlers/client/start.py:
   ```python
   @router.message(F.text == "/start")
   async def cmd_start(message: Message, state: FSMContext):
       """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
       company_id = state.resolve_dp().get('company_id')
       subscription_status = state.resolve_dp().get('subscription_status')
       subscription_end_date = state.resolve_dp().get('subscription_end_date')
       
       if subscription_status in ['overdue', 'blocked']:
           days_left_message = ""
           
           if subscription_end_date:
               from datetime import date, timedelta
               days_left = (subscription_end_date - date.today()).days
               
               if days_left < 0:
                   days_left_message = f"–ü–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ –Ω–∞ {-days_left} –¥–Ω–µ–π."
               elif days_left == 0:
                   days_left_message = "–ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —Å–µ–≥–æ–¥–Ω—è."
               else:
                   days_left_message = f"–ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ {days_left} –¥–Ω–µ–π."
           
           warning_message = "‚ö†Ô∏è " + days_left_message + "\n\n"
           warning_message += "–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.\n"
           warning_message += "–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–¥–ª–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É.\n"
           warning_message += "–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏."
           
           await message.answer(warning_message)
           return
       
       # –ò—Å–ø–æ–ª—å–∑—É–µ–º tenant-—Å–µ—Å—Å–∏—é
       async for session in get_tenant_session(company_id):
           # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
   ```

2. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–ø–∏—Å–∫–µ –≤ –º–µ–Ω—é:
   ```python
   @router.message(F.text == "/start")
   async def cmd_start(message: Message, state: FSMContext):
       """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
       # ... –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
       
       subscription_info = ""
       if subscription_status == 'active':
           subscription_info = f"üìÖ –ü–æ–¥–ø–∏—Å–∫–∞ –¥–æ: {subscription_end_date.strftime('%d.%m.%Y')}"
       elif subscription_status == 'overdue':
           subscription_info = "‚ö†Ô∏è –ü–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞!"
       elif subscription_status == 'blocked':
           subscription_info = "‚ùå –ü–æ–¥–ø–∏—Å–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!"
       
       await message.answer(
           f"üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {client.full_name}!\n\n"
           f"{subscription_info}\n\n"
           f"–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
           reply_markup=get_client_main_keyboard()
       )
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- [ ] –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ –≤ –º–µ–Ω—é
- [ ] –¢–µ–∫—Å—Ç –ø–æ–Ω—è—Ç–Ω—ã–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.5: –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞/—Ä–µ—Å—Ç–∞—Ä—Ç–∞ –±–æ—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:
   ```
   scripts/start_bot.py
   ```

2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É:
   ```python
   import sys
   import asyncio
   
   from app.database import get_session_with_schema
   from shared.database.models import Company
   from sqlalchemy import select
   
   async def start_bot(company_id: int):
       """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏"""
       async for session in get_session_with_schema("public"):
           result = await session.execute(
               select(Company).where(Company.id == company_id)
           )
           company = result.scalar_one_or_none()
           
           if not company:
               print(f"‚ùå –ö–æ–º–ø–∞–Ω–∏—è {company_id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
               return
           
           if not company.telegram_bot_token:
               print(f"‚ùå –ö–æ–º–ø–∞–Ω–∏—è {company.name} –Ω–µ –∏–º–µ–µ—Ç —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞")
               return
           
           print(f"üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ {company.name}...")
           
           # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
           # –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å subprocess –∏–ª–∏ –∏–º–ø–æ—Ä—Ç
           # –ü—Ä–∏–º–µ—Ä —Å –∏–º–ø–æ—Ä—Ç–æ–º:
           from bot.main import run_bot_for_company
           await run_bot_for_company(company)
   
   if __name__ == "__main__":
       if len(sys.argv) < 2:
           print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python start_bot.py <company_id>")
           sys.exit(1)
       
       company_id = int(sys.argv[1])
       asyncio.run(start_bot(company_id))
   ```

3. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –¥–ª—è —Ä–µ—Å—Ç–∞—Ä—Ç–∞:
   ```
   scripts/restart_bot.py
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] –°–∫—Ä–∏–ø—Ç start_bot.py —Å–æ–∑–¥–∞–Ω
- [ ] –°–∫—Ä–∏–ø—Ç restart_bot.py —Å–æ–∑–¥–∞–Ω
- [ ] –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- [ ] –ë–æ—Ç —Ä–µ—Å—Ç–∞—Ä—Ç—É–µ—Ç—Å—è

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.6: –û–±–Ω–æ–≤–∏—Ç—å bot/config.py

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–æ—Ç–∞–º–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:
   ```
   bot/config.py
   ```

2. –û–±–Ω–æ–≤–∏—Ç—å –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤:
   ```python
   """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞"""
   import os
   from typing import List
   from dotenv import load_dotenv

   load_dotenv()

   # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
   BOT_TOKEN = os.getenv("BOT_TOKEN", "")

   # ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
   ADMIN_IDS = [int(id.strip()) for id in os.getenv("ADMIN_IDS", "").split(",") if id.strip()]

   # Database
   DB_HOST = os.getenv("DB_HOST", "postgres")
   DB_PORT = int(os.getenv("DB_PORT", "5432"))
   DB_NAME = os.getenv("DB_NAME", "barber_db")
   DB_USER = os.getenv("DB_USER", "barber_user")
   DB_PASSWORD = os.getenv("DB_PASSWORD", "")

   # Redis
   REDIS_HOST = os.getenv("REDIS_HOST", "redis")
   REDIS_PORT = int(os.getenv("REDIS_PORT", "6379"))
   REDIS_DB = int(os.getenv("REDIS_DB", "0"))

   # App Settings
   DEBUG = os.getenv("DEBUG", "False").lower() == "true"
   TIMEZONE = os.getenv("TIMEZONE", "Europe/Moscow")

   # Work Schedule
   WORK_START_TIME = os.getenv("WORK_START_TIME", "09:00")
   WORK_END_TIME = os.getenv("WORK_END_TIME", "18:00")
   SLOT_DURATION = int(os.getenv("SLOT_DURATION", "30"))
   ENABLE_MASTER_SPECIALIZATION = os.getenv("ENABLE_MASTER_SPECIALIZATION", "false").lower() == "true"

   # Notifications
   REMINDER_DAY_BEFORE_TIME = os.getenv("REMINDER_DAY_BEFORE_TIME", "18:00")
   REMINDER_HOUR_BEFORE = os.getenv("REMINDER_HOUR_BEFORE", "true").lower() == "true"
   NOTIFY_ADMIN_DELAY_MINUTES = int(os.getenv("NOTIFY_ADMIN_DELAY_MINUTES", "5"))
   WORK_ORDER_TIME = os.getenv("WORK_ORDER_TIME", "08:00")

   # Database URL
   DATABASE_URL = f"postgresql+asyncpg://{DB_USER}:{DB_PASSWORD}@{DB_HOST}:{DB_PORT}/{DB_NAME}"


   # –ú—É–ª—å—Ç–∏-–±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   MULTI_BOT_MODE = os.getenv("MULTI_BOT_MODE", "true").lower() == "true"
   SPECIFIC_COMPANY_ID = os.getenv("SPECIFIC_COMPANY_ID", None)
   
   # –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π company_id, –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –µ–≥–æ
   if SPECIFIC_COMPANY_ID:
       SPECIFIC_COMPANY_ID = int(SPECIFIC_COMPANY_ID)
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] config.py –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] MULTI_BOT_MODE –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] SPECIFIC_COMPANY_ID –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.7: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º—É–ª—å—Ç–∏-–±–æ—Ç —Å–∏—Å—Ç–µ–º—ã.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
   ```
   scripts/test_multi_bots.py
   ```

2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã:
   ```python
   import asyncio
   import sys
   from sqlalchemy.ext.asyncio import AsyncSession
   from sqlalchemy import select, text
   
   from app.database import get_session_with_schema, get_tenant_session
   from shared.database.models import Company, User
   from bot.database.connection import init_db
   
   async def test_multi_bots():
       """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º—É–ª—å—Ç–∏-–±–æ—Ç —Å–∏—Å—Ç–µ–º—ã"""
       print("=== –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Multi-Bot System ===\n")
       
       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ë–î
       await init_db()
       
       # –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π
       print("1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π...")
       async for session in get_session_with_schema("public"):
           result = await session.execute(
               select(Company).where(
                   Company.is_active == True,
                   Company.telegram_bot_token.isnot(None)
               )
           )
           companies = result.scalars().all()
           
           for company in companies:
               print(f"   ‚úÖ –ö–æ–º–ø–∞–Ω–∏—è: {company.name} (ID: {company.id})")
               print(f"      –¢–æ–∫–µ–Ω: {company.telegram_bot_token[:20]}...")
               print(f"      –°—Ö–µ–º–∞: tenant_{company.id}")
           
           print(f"–í—Å–µ–≥–æ –∫–æ–º–ø–∞–Ω–∏–π: {len(companies)}")
       
       # –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
       print("\n2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö...")
       if len(companies) >= 2:
           company1, company2 = companies[0], companies[1]
           
           # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ tenant_001
           async for session in get_tenant_session(company1.id):
               from bot.database.crud import create_booking
               from datetime import date, time
               
               await create_booking(
                   session,
                   client_id=1,
                   service_id=1,
                   booking_date=date.today(),
                   booking_time=time(9, 0),
                   duration=30,
                   end_time=time(9, 30),
                   comment="TEST_ISOLATION",
                   created_by=1
               )
           
           print(f"   –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ –≤ tenant_{company1.id}")
           
           # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ–Ω–∞ –ù–ï –≤–∏–¥–Ω–∞ –≤ tenant_002
           async for session in get_tenant_session(company2.id):
               from bot.database.crud import get_bookings_by_client
               
               bookings = await get_bookings_by_client(session, 1)
               
               print(f"   –ó–∞–ø–∏—Å–µ–π –≤ tenant_{company2.id}: {len(bookings)}")
               
               found = False
               for booking in bookings:
                   if booking.comment == "TEST_ISOLATION":
                       found = True
                       break
               
               if found:
                   print(f"   ‚ùå –û–®–ò–ë–ö–ê –ò–ó–û–õ–Ø–¶–ò–ò! –ó–∞–ø–∏—Å—å –≤–∏–¥–Ω–∞ –≤ –¥—Ä—É–≥–æ–π —Å—Ö–µ–º–µ")
               else:
                   print(f"   ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç!")
       else:
           print(f"   ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–º–ø–∞–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–∞ –∏–∑–æ–ª—è—Ü–∏–∏ (–Ω—É–∂–Ω–æ >= 2)")
       
       # –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
       print("\n3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞...")
       # –≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ company_id —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
       # –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
       print(f"   ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ª–æ–≥–∏")
       
       print("\n=== –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ ===")
   
   if __name__ == "__main__":
       asyncio.run(test_multi_bots())
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç:
   ```bash
   docker compose exec bot python scripts/test_multi_bots.py
   ```

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –±–æ—Ç–æ–≤:
   ```bash
   docker compose logs bot -f | grep -E "(–ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞|company_id|schema_name)"
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω
- [ ] –¢–µ—Å—Ç –∫–æ–º–ø–∞–Ω–∏–π –ø—Ä–æ–π–¥–µ–Ω
- [ ] –¢–µ—Å—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–π–¥–µ–Ω
- [ ] –¢–µ—Å—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–π–¥–µ–Ω
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 7.8: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–µ.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
   ```
   scripts/test_subscription_check.py
   ```

2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã:
   ```python
   import asyncio
   import sys
   from sqlalchemy import select, text
   
   from app.database import get_session_with_schema
   from shared.database.models import Company
   
   async def test_subscription_check():
       """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏"""
       print("=== –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ ===\n")
       
       # –¢–µ—Å—Ç 1: –ö–æ–º–ø–∞–Ω–∏—è —Å –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–æ–π
       print("1. –ö–æ–º–ø–∞–Ω–∏—è —Å –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–æ–π...")
       async for session in get_session_with_schema("public"):
           result = await session.execute(
               select(Company).where(Company.id == 1)
           )
           company = result.scalar_one_or_none()
           
           if company:
               print(f"   Company: {company.name}")
               print(f"   is_active: {company.is_active}")
               print(f"   can_create_bookings: {company.can_create_bookings}")
               print(f"   subscription_status: {company.subscription_status}")
               
               if company.can_create_bookings:
                   print(f"   ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —Ä–∞–∑—Ä–µ—à–µ–Ω–æ")
               else:
                   print(f"   ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ")
           else:
               print(f"   ‚ùå –ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
       
       # –¢–µ—Å—Ç 2: –ö–æ–º–ø–∞–Ω–∏—è —Å –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–æ–π
       print("\n2. –ö–æ–º–ø–∞–Ω–∏—è —Å –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–æ–π...")
       async for session in get_session_with_schema("public"):
           result = await session.execute(
               select(Company).where(Company.id == 1)
           )
           company = result.scalar_one_or_none()
           
           if company:
               # –£—Å—Ç–∞–Ω–æ–≤–∏–º can_create_bookings = False –¥–ª—è —Ç–µ—Å—Ç–∞
               company.can_create_bookings = False
               await session.commit()
               
               print(f"   Company: {company.name}")
               print(f"   can_create_bookings: {company.can_create_bookings}")
               print(f"   ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç")
               
               # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
               company.can_create_bookings = True
               await session.commit()
       else:
           print(f"   ‚ùå –ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
       
       print("\n=== –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ ===")
   
   if __name__ == "__main__":
       asyncio.run(test_subscription_check())
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç:
   ```bash
   docker compose exec bot python scripts/test_subscription_check.py
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω
- [ ] –¢–µ—Å—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–æ–π–¥–µ–Ω
- [ ] –¢–µ—Å—Ç –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–æ–π–¥–µ–Ω
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —ç—Ç–∞–ø–∞

### Bot main.py

- [ ] main.py –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
- [ ] –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ—Ç–æ–≤
- [ ] –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ

### Database

- [ ] connection.py –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] get_tenant_session —Å–æ–∑–¥–∞–Ω–∞
- [ ] search_path —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### –•–µ–Ω–¥–ª–µ—Ä—ã

- [ ] start.py –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] booking.py –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Tenant-—Å–µ—Å—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

### –°–æ–æ–±—â–µ–Ω–∏—è

- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- [ ] –¢–µ–∫—Å—Ç –ø–æ–Ω—è—Ç–Ω—ã–π

### –£—Ç–∏–ª–∏—Ç—ã

- [ ] –°–∫—Ä–∏–ø—Ç start_bot.py —Å–æ–∑–¥–∞–Ω
- [ ] –°–∫—Ä–∏–ø—Ç restart_bot.py —Å–æ–∑–¥–∞–Ω
- [ ] –ö–æ–Ω—Ñ–∏–≥ –æ–±–Ω–æ–≤–ª–µ–Ω

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω
- [ ] –¢–µ—Å—Ç –º—É–ª—å—Ç–∏-–±–æ—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω
- [ ] –¢–µ—Å—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –ø—Ä–æ–π–¥–µ–Ω
- [ ] –¢–µ—Å—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–æ–π–¥–µ–Ω
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ

### –†–∏—Å–∫ 1: –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Ç–æ–∫–µ–Ω–æ–≤ –±–æ—Ç–æ–≤

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è  
**–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ

**–ú–µ—Ä—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ë–î

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- –°–≤—è–∑—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π

---

### –†–∏—Å–∫ 2: –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ö–µ–º

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ

**–ú–µ—Ä—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ search_path
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏:**
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –°–±—Ä–æ—Å search_path
- –û—Ç–∫–∞—Ç –∫ —É–º–æ–ª—á–∞–Ω–∏—é

---

### –†–∏—Å–∫ 3: –ü–∞–º—è—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –±–æ—Ç–æ–≤

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–æ–µ

**–ú–µ—Ä—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–æ—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏:**
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MemoryStorage —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º
- –†–µ—Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

---

### –†–∏—Å–∫ 4: –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è  
**–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ

**–ú–µ—Ä—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
- –¢–∞–π–º-–∞—É—Ç—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- –õ–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –±–æ—Ç–æ–≤:
   ```bash
   docker compose logs bot -f
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞:
   ```bash
   docker compose logs bot | grep "company_id": 1"
   ```

3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞:
   ```bash
   docker compose logs bot | grep "company_id\|schema_name"
   ```

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–æ —Å—Ö–µ–º–∞–º–∏:
   ```bash
   docker compose exec postgres psql -U barber_user -d barber_db -c "\dn"
   ```

5. –†–µ—Å—Ç–∞—Ä—Ç–Ω—É—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞:
   ```bash
   docker compose restart bot
   # –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏
   ```

6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥:
   ```bash
   docker compose exec bot printenv | grep MULTI_BOT
   ```

---

**–≠—Ç–∞–ø 7 –∑–∞–≤–µ—Ä—à–µ–Ω:** [ ]  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** _________  
**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:** _________________

