# ü§ñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Telegram –±–æ—Ç–∞

## üìã –î–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∞–ª–æ–Ω–∞ –∫—Ä–∞—Å–æ—Ç—ã

- **–ù–∞–∑–≤–∞–Ω–∏–µ:** barber77_1
- **Username –±–æ—Ç–∞:** barber77_1_bot
- **–¢–æ–∫–µ–Ω –±–æ—Ç–∞:** `8214331847:AAEV8pWvwvTNtlrRDBoNtu_w6ZLPmJMC25o`

---

## üöÄ –®–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –û–±–Ω–æ–≤–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é —Å —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–ø–∞–Ω–∏—é (–µ—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ ID)
docker compose exec web python scripts/update_company_bot_token.py 8 8214331847:AAEV8pWvwvTNtlrRDBoNtu_w6ZLPmJMC25o barber77_1_bot

# –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–ø–∞–Ω–∏—é
docker compose exec web python scripts/update_company_bot_token.py --create "barber77_1" "barber77@test.com" 8214331847:AAEV8pWvwvTNtlrRDBoNtu_w6ZLPmJMC25o barber77_1_bot
```

### 2. –ù–∞–π—Ç–∏ ID –∫–æ–º–ø–∞–Ω–∏–∏ (–µ—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ)

```bash
# –ü–æ–∏—Å–∫ –ø–æ —Ç–æ–∫–µ–Ω—É
docker compose exec web python scripts/test_bot_messages.py --find 8214331847:AAEV8pWvwvTNtlrRDBoNtu_w6ZLPmJMC25o
```

### 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ <company_id> –Ω–∞ ID –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ —à–∞–≥–∞ 2
# –ó–∞–º–µ–Ω–∏—Ç–µ <your_telegram_id> –Ω–∞ –≤–∞—à Telegram ID
docker compose exec web python scripts/test_bot_messages.py <company_id> <your_telegram_id> "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ barber77_1"
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
docker compose exec web python scripts/test_bot_messages.py 8 123456789 "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞
docker compose logs bot | tail -50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±–æ—Ç–∞
docker compose ps bot
```

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–æ—Ç–∞
docker compose restart bot

# –ò–ª–∏ —á–µ—Ä–µ–∑ API (–µ—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ company_id)
curl -X POST http://localhost:8000/api/bot-manager/start/8
```

---

## üîç –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID

1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [@getmyid_bot](https://t.me/getmyid_bot)
3. –ë–æ—Ç –≤–µ—Ä–Ω–µ—Ç –≤–∞—à Telegram ID

---

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ SQL

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
docker compose exec barber_postgres psql -U barber_user -d barber_db

# –ù–∞–π—Ç–∏ –∫–æ–º–ø–∞–Ω–∏—é
SELECT id, name, email, telegram_bot_username, is_active, subscription_status 
FROM public.companies 
WHERE telegram_bot_token LIKE '%8214331847%';
```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω:**
   ```bash
   docker compose exec web python scripts/test_bot_messages.py --find 8214331847:AAEV8pWvwvTNtlrRDBoNtu_w6ZLPmJMC25o
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω:**
   ```bash
   docker compose logs bot | grep "barber77"
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `/start`
   - –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç —Å–º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –û—à–∏–±–∫–∞ "Forbidden: bot was blocked by the user"

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞
- –ù—É–∂–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞

### –û—à–∏–±–∫–∞ "Bad Request: chat not found"

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞—á–∞–ª –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
- –ù—É–∂–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `/start`

---

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
‚úÖ –ë–æ—Ç —Å–æ–∑–¥–∞–Ω: @barber77_1_bot (Barber 77)
üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 123456789...
   –¢–µ–∫—Å—Ç: –ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!
   Message ID: 12345
   –î–∞—Ç–∞: 2026-01-06 12:00:00
```

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–õ–æ–≥–∏ –±–æ—Ç–∞:** `docker compose logs -f bot`
- **–õ–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞:** `docker compose logs -f web`
- **API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º–∏:** `http://localhost:8000/api/bot-manager/`
