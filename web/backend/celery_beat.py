"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery Beat –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á.

–≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á:
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 7 –¥–Ω–µ–π –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 –¥–µ–Ω—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–∫–∞—Ö (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
"""

from celery.schedules import crontab

from app.tasks.subscription_notifications import (
    send_reminder_7_days_before,
    send_reminder_day_before,
    send_expired_notification,
    send_inactive_subscription_notification,
    send_failed_payment_notification
)
from app.tasks.notifications import (
    send_reminder_day_before_task,
    send_reminder_hour_before_task,
    send_work_orders_to_masters_task,
    notify_admin_new_bookings_task
)

# ==================== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è ====================

# –ó–∞–¥–∞—á–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫ (SaaS)
# –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 9:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 7 –¥–Ω–µ–π –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00
schedule_reminder_7_days = {
    'task': 'app.tasks.subscription_notifications.send_reminder_7_days_before',
    'schedule': crontab(hour=9, minute=0),  # 09:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
    'options': {
        'expires': 86400,  # 24 —á–∞—Å–∞ (task expires)
    }
}

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 –¥–µ–Ω—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00
schedule_reminder_day_before = {
    'task': 'app.tasks.subscription_notifications.send_reminder_day_before',
    'schedule': crontab(hour=9, minute=0),  # 09:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
    'options': {
        'expires': 86400,  # 24 —á–∞—Å–∞
    }
}

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00
schedule_expired_notification = {
    'task': 'app.tasks.subscription_notifications.send_expired_notification',
    'schedule': crontab(hour=9, minute=0),  # 09:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
    'options': {
        'expires': 86400,  # 24 —á–∞—Å–∞
    }
}

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–∫–∞—Ö
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00
schedule_inactive_subscription = {
    'task': 'app.tasks.subscription_notifications.send_inactive_subscription_notification',
    'schedule': crontab(hour=9, minute=0),  # 09:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
    'options': {
        'expires': 86400,  # 24 —á–∞—Å–∞
    }
}

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00
schedule_failed_payment = {
    'task': 'app.tasks.subscription_notifications.send_failed_payment_notification',
    'schedule': crontab(hour=9, minute=0),  # 09:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
    'options': {
        'expires': 86400,  # 24 —á–∞—Å–∞
    }
}

# ==================== –ó–∞–¥–∞—á–∏ –¥–ª—è –∑–∞–ø–∏—Å–µ–π (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ) ====================

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 –¥–µ–Ω—å –¥–æ –∑–∞–ø–∏—Å–∏
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 18:00
schedule_reminder_1_day_booking = {
    'task': 'app.tasks.notifications.send_reminder_day_before_task',
    'schedule': crontab(hour=18, minute=0),  # 18:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
    'options': {
        'expires': 86400,  # 24 —á–∞—Å–∞
    }
}

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 —á–∞—Å –¥–æ –∑–∞–ø–∏—Å–∏
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å 09:00 –¥–æ 20:00 –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
schedule_reminder_1_hour_booking = {
    'task': 'app.tasks.notifications.send_reminder_hour_before_task',
    'schedule': crontab(minute='*/10', hour='9-20'),  # –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç —Å 09:00 –¥–æ 20:00
    'options': {
        'expires': 7200,  # 2 —á–∞—Å–∞ (task expires)
    }
}

# –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–∏—Å—Ç-–Ω–∞—Ä—è–¥–æ–≤ –º–∞—Å—Ç–µ—Ä–∞–º
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 08:00
schedule_work_orders = {
    'task': 'app.tasks.notifications.send_work_orders_to_masters_task',
    'schedule': crontab(hour=8, minute=0),  # 08:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
    'options': {
        'expires': 86400,  # 24 —á–∞—Å–∞
    }
}

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –æ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å—è—Ö
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
schedule_admin_new_bookings = {
    'task': 'app.tasks.notifications.notify_admin_new_bookings_task',
    'schedule': crontab(minute='*/10'),  # –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
    'options': {
        'expires': 3600,  # 1 —á–∞—Å
    }
}

# ==================== –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è ====================

beat_schedule = {
    # –ó–∞–¥–∞—á–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫ (–Ω–æ–≤—ã–µ –¥–ª—è SaaS)
    'subscription-reminder-7-days': schedule_reminder_7_days,
    'subscription-reminder-1-day': schedule_reminder_day_before,
    'subscription-expired': schedule_expired_notification,
    'subscription-inactive': schedule_inactive_subscription,
    'subscription-payment-failed': schedule_failed_payment,
    
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –∑–∞–ø–∏—Å–µ–π
    'booking-reminder-1-day': schedule_reminder_1_day_booking,
    'booking-reminder-1-hour': schedule_reminder_1_hour_booking,
    'work-orders': schedule_work_orders,
    'admin-new-bookings': schedule_admin_new_bookings,
}

# ==================== –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ ====================

"""
üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á Celery Beat

–°—É–±—Å–∏–¥–∏–∏ (SaaS):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚è∞ –í—Ä–µ–º—è: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00 (–ø–æ –ú–°–ö)

1. send_reminder_7_days_before
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 7 –¥–Ω–µ–π –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~1-2 –º–∏–Ω—É—Ç—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–ø–∞–Ω–∏–π)

2. send_reminder_day_before
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 –¥–µ–Ω—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~1-2 –º–∏–Ω—É—Ç—ã

3. send_expired_notification
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~1-2 –º–∏–Ω—É—Ç—ã

4. send_inactive_subscription_notification
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–∫–∞—Ö
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~1-2 –º–∏–Ω—É—Ç—ã

5. send_failed_payment_notification
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö –∑–∞ 7 –¥–Ω–µ–π
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~1-2 –º–∏–Ω—É—Ç—ã

–ó–∞–ø–∏—Å–∏ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚è∞ –í—Ä–µ–º—è: –†–∞–∑–ª–∏—á–Ω–æ–µ

6. send_reminder_day_before_task
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 18:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 –¥–µ–Ω—å –¥–æ –∑–∞–ø–∏—Å–∏
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~2-3 –º–∏–Ω—É—Ç—ã

7. send_reminder_hour_before_task
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç —Å 09:00 –¥–æ 20:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 —á–∞—Å –¥–æ –∑–∞–ø–∏—Å–∏
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~5-10 –º–∏–Ω—É—Ç –≤ —á–∞—Å

8. send_work_orders_to_masters_task
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 08:00
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–∏—Å—Ç-–Ω–∞—Ä—è–¥–æ–≤ –º–∞—Å—Ç–µ—Ä–∞–º
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~5-10 –º–∏–Ω—É—Ç

9. notify_admin_new_bookings_task
   ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞: –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
   ‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –æ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å—è—Ö
   ‚Ä¢ –ó–∞—Ç—Ä–∞—Ç–Ω–æ—Å—Ç—å: ~1-2 –º–∏–Ω—É—Ç—ã –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç

‚è∞ –û–±—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ü–∏–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: 09:00-10:00 (~5-8 –∑–∞–¥–∞—á –∑–∞ 10 –º–∏–Ω—É—Ç)
–í—Ä–µ–º—è –ø–∏–∫–∞: ~15-25 –º–∏–Ω—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á

–û–±—ã—á–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: –í–µ—Å—å –¥–µ–Ω—å (~10-15 –º–∏–Ω—É—Ç –≤ —á–∞—Å)
"""