# üìå –§–∏–Ω–∞–ª—å–Ω—ã–π TODO –ø—Ä–æ–µ–∫—Ç–∞ Barber SaaS (Multi‚ÄëTenant)
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2026-01-14  
**–¶–µ–ª—å —Ñ–∞–π–ª–∞:** –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –ø–æ –æ—Å—Ç–∞–≤—à–∏–º—Å—è –∑–∞–¥–∞—á–∞–º (roadmap + —Ä–µ–∞–ª—å–Ω—ã–µ –±–∞–≥–∏).

---

## ‚úÖ –£–∂–µ –∑–∞–∫—Ä—ã—Ç–æ (–ø–æ —Ñ–∞–∫—Ç—É –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
- **–≠—Ç–∞–ø 1**: –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚Äî –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –∑–∞–≤–µ—Ä—à—ë–Ω –≤ `STAGE_1_COMPLETE.md` (tenant-—Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, —á–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞).
- **–≠—Ç–∞–ø 2**: Public-–º–æ–¥–µ–ª–∏/—Å—Ö–µ–º—ã/CRUD/seed ‚Äî –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –∑–∞–≤–µ—Ä—à—ë–Ω –≤ `STAGE_2_COMPLETE.md`.
- **Public —Å—Ö–µ–º–∞ –∏ super-admin**: –ø–æ `TODO_FIXES.md` –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—É—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (ORM, webhooks, super_admin).
- **–ú—É–ª—å—Ç–∏-–±–æ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –µ—Å—Ç—å `bot/bot_manager.py`, `bot/main.py`, middleware, –ø—Ä—è–º—ã–µ SQL –≤—Å—Ç–∞–≤–∫–∏/—á—Ç–µ–Ω–∏–µ –¥–ª—è tenant.
- **–ü–ª–∞–Ω –ø–æ –≥–ª–∞–≤–Ω–æ–º—É –±–æ—Ç—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞**: –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª `md/14_CONTRACT_BOT_PLAN.md`.

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Ä—è–¥ —Ñ–∞–π–ª–æ–≤ –≤ `md/` –≤—Å—ë –µ—â—ë –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å ¬´‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏¬ª, –Ω–æ –∫–æ–¥ —É–∂–µ —á–∞—Å—Ç–∏—á–Ω–æ/–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚Äî —ç—Ç–æ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å (—Å–º. –∑–∞–¥–∞—á–∏ ‚Äú–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è‚Äù –Ω–∏–∂–µ).

---

## üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)

### 0.6) Backend: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤/–ø–æ—Å—Ç–æ–≤/—É—Å–ª—É–≥ –ø–∞–¥–∞–µ—Ç 500
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å `DB_HOST/DB_PORT` –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
  - `DB_HOST=postgres`, `DB_PORT=5432` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ë–î
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: PATCH `/api/masters`, `/api/posts`, `/api/services` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200.
- [x] **–î–µ–ø–ª–æ–π —Ñ–∏–∫—Å–∞ –Ω–∞ 45.144.67.47**:
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã `masters_tenant.py`, `posts_tenant.py`
  - –û–±–Ω–æ–≤–ª–µ–Ω `web/frontend/nginx.conf` (`proxy_pass http://web:8000/api/`)
  - –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã `web` –∏ `web-frontend`
 - [x] **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**:
   - –î–æ–±–∞–≤–ª–µ–Ω—ã CRUD endpoints –≤ `services_tenant.py`
   - –î–æ–±–∞–≤–ª–µ–Ω `logger` –≤ `users_tenant.py` (—É–±—Ä–∞–Ω 500 –ø—Ä–∏ PATCH)
   - –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω `web` –Ω–∞ 45.144.67.47
  - –î–æ–±–∞–≤–ª–µ–Ω endpoint `PATCH /api/users/{id}/admin` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞

### 0.7) Backend/Frontend: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Ç –≤ –∑–∞–ø–∏—Å—è—Ö (service_date/request_date)
- [x] **–û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å/—Å—Ö–µ–º—ã/–æ—Ç–≤–µ—Ç—ã**:
  - –í `BookingResponse` –¥–æ–±–∞–≤–ª–µ–Ω `service_date` –∏ `request_date`
  - –í `BookingCreateRequest/BookingUpdateRequest` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `service_date`
- [x] **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥**:
  - –í —Ç–∞–±–ª–∏—Ü–µ ‚Äú–ó–∞–ø–∏—Å–∏‚Äù: ‚Äú–î–∞—Ç–∞ —É—Å–ª—É–≥–∏‚Äù = `service_date`, –¥–æ–±–∞–≤–ª–µ–Ω–∞ ‚Äú–î–∞—Ç–∞ –∑–∞—è–≤–∫–∏‚Äù = `request_date`
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ ‚Äú–î–∞—Ç–∞ —É—Å–ª—É–≥–∏‚Äù
- [x] **–û–±–Ω–æ–≤–∏—Ç—å –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
  - `tenant_8.bookings`: —É–¥–∞–ª–µ–Ω–∏–µ `telegram_id`, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `request_date`, `NOT NULL`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ API: `/api/bookings` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `service_date` –∏ `request_date`

### 0.5) Frontend: /masters –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- [x] **–£–±—Ä–∞—Ç—å `is_active` –∏–∑ `web/backend/app/api/masters_tenant.py`**:
  - –ú–æ–¥–µ–ª—å `Master` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `is_active`, –æ–±—Ä–∞—â–µ–Ω–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç 500
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫.

### 0.4) Frontend: /posts –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `web/backend/app/api/posts_tenant.py`**:
  - –¥–æ–±–∞–≤–∏—Ç—å `logger = logging.getLogger(__name__)` –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ 500.

### 0.3) Frontend: /work-orders –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä–∫—É –≤ `web/backend/app/api/masters_tenant.py`**:
  - –∑–∞–º–µ–Ω–∏—Ç—å `WHERE date = :schedule_date` –Ω–∞ `WHERE service_date = :schedule_date`
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: `/work-orders` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ª–∏—Å—Ç-–Ω–∞—Ä—è–¥—ã –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É.

### 0.2) Frontend: /bookings –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API –≤ `web/frontend/nginx.conf`**:
  - proxy_pass –Ω–∞ `http://web:8000/api/` –≤–º–µ—Å—Ç–æ `http://172.17.0.1:8000/api/`
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/bookings` –≥—Ä—É–∑—è—Ç—Å—è –∏–∑ backend.

### 0) Bot: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã –∑–∞—è–≤–∫–∏
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `update_booking_request_date` –≤ `bot/database/crud.py`**: –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä—ã–≤–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.
  - –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ–ª–µ `request_date` –≤ —Ç–∞–±–ª–∏—Ü–µ `tenant_X.bookings`.
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `SET search_path` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å tenant —Å—Ö–µ–º–æ–π.
  - –õ–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `Booking`.
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `bot/handlers/admin/edit_booking_request_date.py`**:
  - –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã `get_company_context_from_bot` –∏ `is_company_admin_from_bot` –∏–∑ `bot.handlers.admin.bookings_edit`.
  - –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `change_request_date`: —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–æ–≤—É—é –¥–∞—Ç—É –≤ `FSMContext.state`.
  - –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `confirm_request_date`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –¥–∞—Ç—É –∏–∑ state –≤–º–µ—Å—Ç–æ `None`.
  - –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `cancel_edit_request_date`: –æ—á–∏—Å—Ç–∏—Ç—å state.
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—É –∑–∞—è–≤–∫–∏ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫.

### 0.1) Backend: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ `Booking.date`
- [x] **–ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `Booking.date` –Ω–∞ `Booking.service_date`** (API/—ç–∫—Å–ø–æ—Ä—Ç/—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è).
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: backend –Ω–µ –ø–∞–¥–∞–µ—Ç —Å `AttributeError: Booking.date`, –∑–∞–ø–∏—Å–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è.
  - **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: SQL-–≤—ã–±–æ—Ä–∫–∏ `b.date` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `b.service_date` –≤ API/—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö.

### 0.2) Bot: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç
- [x] **–£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä–∞—Å—á–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç** –≤ `bot/database/crud.py`:
  - –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –¥–∞—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ —à–∞–≥ –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏.

### 0.3) Bot (–∞–¥–º–∏–Ω): –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å SQL –≤ `bookings_edit.py` –Ω–∞ `service_date`** –∏ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏.
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –≤ `bookings_edit.py`**: —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π `text()` –≤ `session.execute` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏.

### 1) Backend: `/api/clients` –ø–∞–¥–∞–µ—Ç 500 –≤ tenant (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è)
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å `web/backend/app/api/clients_tenant.py`**: —É–±—Ä–∞—Ç—å 500 –ø—Ä–∏ PATCH (NameError: `logger`), –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞.
  - **–°–∏–º–ø—Ç–æ–º**: `UndefinedColumnError: column c.car_brand does not exist` (–∏ —Ä–∞–Ω–µ–µ `total_visits`).
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –≤–∫–ª–∞–¥–∫–∞ ‚Äú–ö–ª–∏–µ–Ω—Ç—ã‚Äù –≤ –∞–¥–º–∏–Ω–∫–µ –∫–æ–º–ø–∞–Ω–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ 500, –¥–∞–Ω–Ω—ã–µ –≥—Ä—É–∑—è—Ç—Å—è.

### 2) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É –≤ Telegram –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞ (—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è)
- [ ] **–î–æ–≤–µ—Å—Ç–∏ –¥–æ ‚Äú–∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–∞‚Äù —Ü–µ–ø–æ—á–∫—É**: `PATCH /api/bookings/{id}` ‚Üí `send_booking_status_notification()` ‚Üí Telegram.
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `telegram_id` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ `tenant_X.users.telegram_id` –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.
  - [ ] –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–µ –ª–æ–≥–∏-–º–µ—Ç–∫–∏: `company_id`, `booking_id`, `user_id`, `telegram_id`, —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ Telegram.
  - [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ: **–±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—ã–º** ‚Äî –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ –Ω–∞–∂–∞–ª `/start`, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ UI –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É, –∞ –≤ UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äú‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ‚Äù.

### 3) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ (Telegram)
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –≤ –±–æ—Ç–µ** (—Ä–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Äú–Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞‚Äù).
  - [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã–±–æ—Ä –∞–¥–º–∏–Ω–æ–≤ –∏–¥—ë—Ç –∏–∑ `tenant_X.users` –ø–æ `role='admin'` –∏ `telegram_id IS NOT NULL`.
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –∞–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏.

---

## üü† –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### 4.1) –ì–ª–∞–≤–Ω—ã–π –±–æ—Ç: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ Telegram
- [x] **–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω** (`md/14_CONTRACT_BOT_PLAN.md`)
- [x] **–î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏—é** –¥–ª—è `contract_requests` (public)
- [x] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å bot‚ÄëFSM –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é DOCX** (docxtpl + num2words)
- [x] **–î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Ä–∞–∑–¥–∞—á—É —Ñ–∞–π–ª–∞** —á–µ—Ä–µ–∑ `/api/public/contracts/{file_name}`
- [x] **–ü–æ–¥–∫–ª—é—á–∏—Ç—å volume `dogovor/`** –≤ `contract-bot` –∏ `web`
- [x] **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∑–∞–∫–∞–∑—á–∏–∫–∞** –∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä `{{–¢–ï–õ–ï–§–û–ù_–ó–ê–ö–ê–ó–ß–ò–ö–ê}}`

### 4) Multi‚Äëtenant backend: –ø—Ä–∏–≤–µ—Å—Ç–∏ CRUD –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
- [ ] **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è tenant**:
  - [x] `company_id` –±–µ—Ä—ë–º –∏–∑ JWT / query / middleware (–µ–¥–∏–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫) ‚Äî `web/backend/app/deps/tenant.py`.
  - [x] Tenant‚Äë—Å–µ—Å—Å–∏—è —á–µ—Ä–µ–∑ dependency `get_tenant_db` (–µ–¥–∏–Ω—ã–π –≤—Ö–æ–¥).
  - [x] `TenantService.get_tenant_session()` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç `search_path` –≤ `public` –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–∫–∏ —Å—Ö–µ–º—ã —á–µ—Ä–µ–∑ –ø—É–ª).
  - [x] –£–±—Ä–∞—Ç—å ‚Äú—Ä—É—á–Ω–æ–π‚Äù `SET search_path` –∏–∑ tenant endpoints (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `get_tenant_db`).
- [ ] **–ê—É–¥–∏—Ç CRUD –º–æ–¥—É–ª–µ–π** (–ø–æ —Ñ–∞–∫—Ç—É –ø–æ–≤–µ–¥–µ–Ω–∏—è, –Ω–µ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É):
  - [x] bookings (`web/backend/app/api/bookings.py`)
  - [x] users (`web/backend/app/api/users_tenant.py`)
  - [x] clients (`web/backend/app/api/clients_tenant.py`)
  - [x] services (`web/backend/app/api/services_tenant.py`)
  - [x] masters (`web/backend/app/api/masters_tenant.py`)
  - [x] posts/—Ä–∞–±–æ—á–∏–µ –º–µ—Å—Ç–∞ (`web/backend/app/api/posts_tenant.py`)
  - [x] blocks (`web/backend/app/api/blocks.py`)
  - [x] promocodes (`web/backend/app/api/promocodes.py`)
  - [x] promotions (`web/backend/app/api/promotions.py`)
  - [x] broadcasts (`web/backend/app/api/broadcasts.py`)
  - [x] settings (`web/backend/app/api/settings.py`)
  - [x] export (`web/backend/app/api/export.py`)
  - **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –Ω–µ—Ç 500/UndefinedColumn, –≤—Å–µ —Å–ø–∏—Å–∫–∏/—Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –≤ tenant –±–µ–∑ —Ä—É—á–Ω—ã—Ö —Ñ–∏–∫—Å–æ–≤.

### 5) Celery: –ø—Ä–∏–≤–µ—Å—Ç–∏ –∑–∞–¥–∞—á–∏ –∫ —Ä–∞–±–æ—á–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é (–∏–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è)
- [ ] –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è/—Ä–∞—Å—Å—ã–ª–∫–∏ —á–µ—Ä–µ–∑ Celery –∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–∑ API.
  - [ ] –ï—Å–ª–∏ —á–µ—Ä–µ–∑ Celery: –ø–æ–¥–Ω—è—Ç—å `celery-worker` –∏ `celery-beat`, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç/–∫–æ–Ω—Ñ–∏–≥–∏, –ø—Ä–æ–≥–Ω–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏.
  - [ ] –ï—Å–ª–∏ –±–µ–∑ Celery: —É–±—Ä–∞—Ç—å –º—ë—Ä—Ç–≤—ã–π –∫–æ–¥/–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, –æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏.

---

## üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Ñ—É–Ω–∫—Ü–∏–∏ ‚Äú–ø–æ –ø–ª–∞–Ω—É‚Äù, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è MVP)

### 6) –†–∞—Å—Å—ã–ª–∫–∏ (Broadcasts)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ä–∞—Å—Å—ã–ª–æ–∫ —á–µ—Ä–µ–∑ Telegram (—Å–º. `md/REMAINING_TASKS.md`).
  - [ ] –û—á–µ—Ä–µ–¥—å/–±–∞—Ç—á–∏–Ω–≥/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram.
  - [ ] –£—á—ë—Ç –æ—à–∏–±–æ–∫ (blocked/forbidden), —Å—á—ë—Ç—á–∏–∫–∏ `total_sent/total_errors`.

### 7) –ê–≤—Ç–æ‚Äë–ª–∏—Å—Ç‚Äë–Ω–∞—Ä—è–¥—ã –º–∞—Å—Ç–µ—Ä–∞–º (—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–∞–π–¥–∂–µ—Å—Ç)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –ª–∏—Å—Ç-–Ω–∞—Ä—è–¥–∞ –º–∞—Å—Ç–µ—Ä–∞–º (–µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–∫—Ç—É–∞–ª–µ–Ω –¥–ª—è —Å–∞–ª–æ–Ω–∞ –∫—Ä–∞—Å–æ—Ç—ã).

### 8) ‚Äú–ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –∑–∞ 5 –º–∏–Ω—É—Ç‚Äù ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º
- [ ] –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–º–µ–Ω–Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ): –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É, –º–µ—Ö–∞–Ω–∏–∑–º ‚Äú—É–∂–µ —É–≤–µ–¥–æ–º–∏–ª–∏‚Äù.

---

## üß™ –≠—Ç–∞–ø 11: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º)
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–æ–≤ `web/backend/tests/` –∏ `bot/tests/`.
- [ ] Unit: —Å–µ—Ä–≤–∏—Å—ã (company/subscription/payment/tenant), —Å—Ö–µ–º—ã.
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ: tenant –∏–∑–æ–ª—è—Ü–∏—è, search_path/middleware, –æ—Å–Ω–æ–≤–Ω—ã–µ CRUD.
- [ ] E2E (–º–∏–Ω–∏–º—É–º): —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –≤—Ö–æ–¥ ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ ‚Üí —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

---

## üöÄ –≠—Ç–∞–ø 12: –î–µ–ø–ª–æ–π
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å `.env.production` –∏ —à–∞–±–ª–æ–Ω—ã –∫–æ–Ω—Ñ–∏–≥–æ–≤.
- [ ] –û—Ç–¥–µ–ª—å–Ω—ã–π compose –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (`docker-compose.prod.yml`).
- [ ] Nginx + SSL + healthchecks.
- [ ] –ë—ç–∫–∞–ø—ã –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

---

## üìö –≠—Ç–∞–ø 13: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ ‚Äú—Ñ–∞–∫—Ç–æ–º –∫–æ–¥–∞‚Äù)
- [x] –ü—Ä–∏–≤–µ—Å—Ç–∏ `md/*.md` —Å—Ç–∞—Ç—É—Å—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é (–≥–¥–µ ‚Äú‚è≥‚Äù, –Ω–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ). *(–≤—ã–ø–æ–ª–Ω–µ–Ω–æ: 2026-01-14)*
- [x] –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ ‚Äúautoservice_*‚Äù –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –¥–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã. *(–≤—ã–ø–æ–ª–Ω–µ–Ω–æ: 2026-01-14)*
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `README.md` (–∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å, —á—Ç–æ –≥–¥–µ, –∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å).

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –∫–∞—á–µ—Å—Ç–≤—É
- [ ] –ü—Ä–æ–≥–Ω–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–≤—å—é: **Bugbot** –∏–ª–∏ **CodeRabbit** –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º (–æ—Å–æ–±–µ–Ω–Ω–æ `bookings.py`, `clients_tenant.py`, bot handlers).

